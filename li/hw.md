 <!-- title: BP21042 呉牧周 -->
# マイクロプロセッサ – 1
BP21042 呉 牧周
## 1. 短縮命令語はなぜ必要とされるのか
32ビットの命令は4バイトのメモリを使用するが，16ビットの短縮命令語だと2バイトしか使わないため，同じサイズのメモリに32ビットのより2倍の量の命令を実装できる．この特徴を利用して，メモリのコストも下げられる．
## 2. 命令フォーマットが統一されていないと，どのような困難があるのか
回路を分析するときに，どの情報がどこにあるのかを調べづらい．また，設計するときにも，違うコードのためにそれぞれ回路を作る必要があるため，設計しづらい．  
## 3.
`li` は後ろにつくimmediateの値によって`addi`を呼ぶか，`lui+addi`を呼ぶかを自動的に変換してくれる．  
`mv` は元レジスタの値を宛先レジスタにコピーするコマンドで，具体的に，足し算（0+値）で行う<br><br>
`li t0 100` と `li t0 100000`について考える<br><br>
1. $100<2^{12}-1$　`I-type`の`imm`に入りきれるので，そのまま`addi`を使って値を保存できる
  ```
  addi x5,x0,100
  ```
  ![image](https://cdn.discordapp.com/attachments/780423396416684054/1029268200132714536/unknown.png)  
  `imm`のところにまだ十分容量があるとわかる<br><br>

2. $100000>2^{12}-1$　`I-type`の`imm`に入りきれないので，先に20ビットの`imm`を入り切れる`lui`（`U-type`）でデータを保存し，残りを`addi`で補完する
  ```
  lui x5,24　;x5=24<<12=98304, U-type
  addi x5,x5,1696 ;x5=0+98304+1696=100000, I type
  ```
  x5=98304  
  ![image](https://cdn.discordapp.com/attachments/780423396416684054/1029282792397357066/unknown.png)  
  x5=0+98304(rs1=5)+1696  
  ![image](https://cdn.discordapp.com/attachments/780423396416684054/1029284297015828492/unknown.png)
